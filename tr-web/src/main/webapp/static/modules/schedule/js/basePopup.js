define("cal/basePopup",["require","jquery","hogan","common/custEvent","./basePopup.tpl"],function(require){function e(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e}function t(t){return e("Function",t)}function i(e){var t=a.extend(c,e);t.width=(t.width+"").replace(/px$/,""),f.options=t,a("body").append(s.compile(h).render(t)),n(),o()}function n(){if(f.options.mask)f.popupMask=a("#popup-mask"),f.popupMask.css({width:a(document).width(),height:a(document).height()});f.popup=a("#base-popup"),f.popupClose=a("#popup-close",f.popup);var e=f.popup.width(),t=f.popup.height(),i=a(window).scrollTop()+Math.round((a(window).height()-t)/2),n=a(window).scrollLeft()+Math.round((a(window).width()-e)/2);f.popup.css({top:i+"px",left:n+"px"})}function r(e){f.popup&&f.popup.remove(),f.popupMask&&f.popupMask.remove(),e&&t(e)&&e.call(null)}function o(){a(window).on("resize",function(){n()}),l.register(u,"close",r),f.popupClose.on("click",function(){l.fire(u,"close")})}var a=require("jquery"),s=require("hogan"),l=require("common/custEvent"),h=require("./basePopup.tpl"),u={},c={mask:!0,title:"标题",width:200,content:""},f={options:{},popupMask:null,popup:null,popupClose:null};return{show:i,closePopup:r,that:u}});